/**
 * @remix-run/router v1.3.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(this,arguments)}var _;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_||(_={}));const $e="popstate";function vr(e){e===void 0&&(e={});function t(n,a){let{pathname:d,search:s,hash:u}=n.location;return he("",{pathname:d,search:s,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Q(a)}return Ft(t,r,null,e)}function x(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ct(){return Math.random().toString(36).substr(2,8)}function Be(e,t){return{usr:e.state,key:e.key,idx:t}}function he(e,t,r,n){return r===void 0&&(r=null),E({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Z(t):t,{state:r,key:t&&t.key||n||Ct()})}function Q(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Z(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Ft(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:d=!1}=n,s=a.history,u=_.Pop,m=null,h=g();h==null&&(h=0,s.replaceState(E({},s.state,{idx:h}),""));function g(){return(s.state||{idx:null}).idx}function D(){u=_.Pop;let w=g(),C=w==null?null:w-h;h=w,m&&m({action:u,location:L.location,delta:C})}function i(w,C){u=_.Push;let F=he(L.location,w,C);r&&r(F,w),h=g()+1;let U=Be(F,h),P=L.createHref(F);try{s.pushState(U,"",P)}catch{a.location.assign(P)}d&&m&&m({action:u,location:L.location,delta:1})}function M(w,C){u=_.Replace;let F=he(L.location,w,C);r&&r(F,w),h=g();let U=Be(F,h),P=L.createHref(F);s.replaceState(U,"",P),d&&m&&m({action:u,location:L.location,delta:0})}function A(w){let C=a.location.origin!=="null"?a.location.origin:a.location.href,F=typeof w=="string"?w:Q(w);return x(C,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,C)}let L={get action(){return u},get location(){return e(a,s)},listen(w){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener($e,D),m=w,()=>{a.removeEventListener($e,D),m=null}},createHref(w){return t(a,w)},createURL:A,encodeLocation(w){let C=A(w);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:i,replace:M,go(w){return s.go(w)}};return L}var O;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(O||(O={}));function Ut(e){return e.index===!0}function tt(e,t,r){return t===void 0&&(t=[]),r===void 0&&(r=new Set),e.map((n,a)=>{let d=[...t,a],s=typeof n.id=="string"?n.id:d.join("-");return x(n.index!==!0||!n.children,"Cannot specify children on an index route"),x(!r.has(s),'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),r.add(s),Ut(n)?E({},n,{id:s}):E({},n,{id:s,children:n.children?tt(n.children,d,r):void 0})})}function Re(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?Z(t):t,a=Yt(n.pathname||"/",r);if(a==null)return null;let d=rt(e);Tt(d);let s=null;for(let u=0;s==null&&u<d.length;++u)s=Kt(d[u],zt(a));return s}function rt(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(d,s,u)=>{let m={relativePath:u===void 0?d.path||"":u,caseSensitive:d.caseSensitive===!0,childrenIndex:s,route:d};m.relativePath.startsWith("/")&&(x(m.relativePath.startsWith(n),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(n.length));let h=ue([n,m.relativePath]),g=r.concat(m);d.children&&d.children.length>0&&(x(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),rt(d.children,t,g,h)),!(d.path==null&&!d.index)&&t.push({path:h,score:$t(h,d.index),routesMeta:g})};return e.forEach((d,s)=>{var u;if(d.path===""||!((u=d.path)!=null&&u.includes("?")))a(d,s);else for(let m of nt(d.path))a(d,s,m)}),t}function nt(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),d=r.replace(/\?$/,"");if(n.length===0)return a?[d,""]:[d];let s=nt(n.join("/")),u=[];return u.push(...s.map(m=>m===""?d:[d,m].join("/"))),a&&u.push(...s),u.map(m=>e.startsWith("/")&&m===""?"/":m)}function Tt(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Bt(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const _t=/^:\w+$/,Ot=3,jt=2,kt=1,It=10,Nt=-2,Ke=e=>e==="*";function $t(e,t){let r=e.split("/"),n=r.length;return r.some(Ke)&&(n+=Nt),t&&(n+=jt),r.filter(a=>!Ke(a)).reduce((a,d)=>a+(_t.test(d)?Ot:d===""?kt:It),n)}function Bt(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Kt(e,t){let{routesMeta:r}=e,n={},a="/",d=[];for(let s=0;s<r.length;++s){let u=r[s],m=s===r.length-1,h=a==="/"?t:t.slice(a.length)||"/",g=Wt({path:u.relativePath,caseSensitive:u.caseSensitive,end:m},h);if(!g)return null;Object.assign(n,g.params);let D=u.route;d.push({params:n,pathname:ue([a,g.pathname]),pathnameBase:Jt(ue([a,g.pathnameBase])),route:D}),g.pathnameBase!=="/"&&(a=ue([a,g.pathnameBase]))}return d}function Wt(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Ht(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let d=a[0],s=d.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((h,g,D)=>{if(g==="*"){let i=u[D]||"";s=d.slice(0,d.length-i.length).replace(/(.)\/+$/,"$1")}return h[g]=Vt(u[D]||"",g),h},{}),pathname:d,pathnameBase:s,pattern:e}}function Ht(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),me(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(s,u)=>(n.push(u),"/([^\\/]+)"));return e.endsWith("*")?(n.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function zt(e){try{return decodeURI(e)}catch(t){return me(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Vt(e,t){try{return decodeURIComponent(e)}catch(r){return me(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function Yt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function me(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function qt(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Z(e):e;return{pathname:r?r.startsWith("/")?r:Gt(r,t):t,search:Qt(n),hash:Zt(a)}}function Gt(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ce(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function at(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Xt(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Z(e):(a=E({},e),x(!a.pathname||!a.pathname.includes("?"),Ce("?","pathname","search",a)),x(!a.pathname||!a.pathname.includes("#"),Ce("#","pathname","hash",a)),x(!a.search||!a.search.includes("#"),Ce("#","search","hash",a)));let d=e===""||a.pathname==="",s=d?"/":a.pathname,u;if(n||s==null)u=r;else{let D=t.length-1;if(s.startsWith("..")){let i=s.split("/");for(;i[0]==="..";)i.shift(),D-=1;a.pathname=i.join("/")}u=D>=0?t[D]:"/"}let m=qt(a,u),h=s&&s!=="/"&&s.endsWith("/"),g=(d||s===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(h||g)&&(m.pathname+="/"),m}const ue=e=>e.join("/").replace(/\/\/+/g,"/"),Jt=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Qt=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Zt=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class We extends Error{}class er{constructor(t,r){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],x(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((d,s)=>n=s),this.controller=new AbortController;let a=()=>n(new We("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",a),this.controller.signal.addEventListener("abort",a),this.data=Object.entries(t).reduce((d,s)=>{let[u,m]=s;return Object.assign(d,{[u]:this.trackPromise(u,m)})},{}),this.done&&this.unlistenAbortSignal(),this.init=r}trackPromise(t,r){if(!(r instanceof Promise))return r;this.deferredKeys.push(t),this.pendingKeysSet.add(t);let n=Promise.race([r,this.abortPromise]).then(a=>this.onSettle(n,t,null,a),a=>this.onSettle(n,t,a));return n.catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),n}onSettle(t,r,n,a){return this.controller.signal.aborted&&n instanceof We?(this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>n}),Promise.reject(n)):(this.pendingKeysSet.delete(r),this.done&&this.unlistenAbortSignal(),n?(Object.defineProperty(t,"_error",{get:()=>n}),this.emit(!1,r),Promise.reject(n)):(Object.defineProperty(t,"_data",{get:()=>a}),this.emit(!1,r),a))}emit(t,r){this.subscribers.forEach(n=>n(t,r))}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((t,r)=>this.pendingKeysSet.delete(r)),this.emit(!0)}async resolveData(t){let r=!1;if(!this.done){let n=()=>this.cancel();t.addEventListener("abort",n),r=await new Promise(a=>{this.subscribe(d=>{t.removeEventListener("abort",n),(d||this.done)&&a(d)})})}return r}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return x(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,r)=>{let[n,a]=r;return Object.assign(t,{[n]:rr(a)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function tr(e){return e instanceof Promise&&e._tracked===!0}function rr(e){if(!tr(e))return e;if(e._error)throw e._error;return e._data}class it{constructor(t,r,n,a){a===void 0&&(a=!1),this.status=t,this.statusText=r||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function nr(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ot=["post","put","patch","delete"],ar=new Set(ot),ir=["get",...ot],or=new Set(ir),lr=new Set([301,302,303,307,308]),sr=new Set([307,308]),Fe={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},dr={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},He={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},lt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,st=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cr=!st;function br(e){x(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t=tt(e.routes),r=null,n=new Set,a=null,d=null,s=null,u=e.hydrationData!=null,m=Re(t,e.history.location,e.basename),h=null;if(m==null){let o=V(404,{pathname:e.history.location.pathname}),{matches:l,route:c}=Xe(t);m=l,h={[c.id]:o}}let g=!m.some(o=>o.route.loader)||e.hydrationData!=null,D,i={historyAction:e.history.action,location:e.history.location,matches:m,initialized:g,navigation:Fe,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||h,fetchers:new Map,blockers:new Map},M=_.Pop,A=!1,L,w=!1,C=!1,F=[],U=[],P=new Map,K=0,ee=-1,Y=new Map,pe=new Set,te=new Map,q=new Map,z=new Map,De=!1;function mt(){return r=e.history.listen(o=>{let{action:l,location:c,delta:p}=o;if(De){De=!1;return}me(z.size===0||p!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let f=ke({currentLocation:i.location,nextLocation:c,historyAction:l});if(f&&p!=null){De=!0,e.history.go(p*-1),ye(f,{state:"blocked",location:c,proceed(){ye(f,{state:"proceeding",proceed:void 0,reset:void 0,location:c}),e.history.go(p)},reset(){le(f),j({blockers:new Map(D.state.blockers)})}});return}return G(l,c)}),i.initialized||G(_.Pop,i.location),D}function pt(){r&&r(),n.clear(),L&&L.abort(),i.fetchers.forEach((o,l)=>Se(l)),i.blockers.forEach((o,l)=>le(l))}function gt(o){return n.add(o),()=>n.delete(o)}function j(o){i=E({},i,o),n.forEach(l=>l(i))}function ie(o,l){var c,p;let f=i.actionData!=null&&i.navigation.formMethod!=null&&H(i.navigation.formMethod)&&i.navigation.state==="loading"&&((c=o.state)==null?void 0:c._isRedirect)!==!0,b;l.actionData?Object.keys(l.actionData).length>0?b=l.actionData:b=null:f?b=i.actionData:b=null;let v=l.loaderData?Ge(i.loaderData,l.loaderData,l.matches||[],l.errors):i.loaderData;for(let[y]of z)le(y);let R=A===!0||i.navigation.formMethod!=null&&H(i.navigation.formMethod)&&((p=o.state)==null?void 0:p._isRedirect)!==!0;j(E({},l,{actionData:b,loaderData:v,historyAction:M,location:o,initialized:!0,navigation:Fe,revalidation:"idle",restoreScrollPosition:Ie(o,l.matches||i.matches),preventScrollReset:R,blockers:new Map(i.blockers)})),w||M===_.Pop||(M===_.Push?e.history.push(o,o.state):M===_.Replace&&e.history.replace(o,o.state)),M=_.Pop,A=!1,w=!1,C=!1,F=[],U=[]}async function Ue(o,l){if(typeof o=="number"){e.history.go(o);return}let{path:c,submission:p,error:f}=ze(o,l),b=i.location,v=he(i.location,c,l&&l.state);v=E({},v,e.history.encodeLocation(v));let R=l&&l.replace!=null?l.replace:void 0,y=_.Push;R===!0?y=_.Replace:R===!1||p!=null&&H(p.formMethod)&&p.formAction===i.location.pathname+i.location.search&&(y=_.Replace);let I=l&&"preventScrollReset"in l?l.preventScrollReset===!0:void 0,S=ke({currentLocation:b,nextLocation:v,historyAction:y});if(S){ye(S,{state:"blocked",location:v,proceed(){ye(S,{state:"proceeding",proceed:void 0,reset:void 0,location:v}),Ue(o,l)},reset(){le(S),j({blockers:new Map(i.blockers)})}});return}return await G(y,v,{submission:p,pendingError:f,preventScrollReset:I,replace:l&&l.replace})}function yt(){if(Me(),j({revalidation:"loading"}),i.navigation.state!=="submitting"){if(i.navigation.state==="idle"){G(i.historyAction,i.location,{startUninterruptedRevalidation:!0});return}G(M||i.historyAction,i.navigation.location,{overrideNavigation:i.navigation})}}async function G(o,l,c){L&&L.abort(),L=null,M=o,w=(c&&c.startUninterruptedRevalidation)===!0,Et(i.location,i.matches),A=(c&&c.preventScrollReset)===!0;let p=c&&c.overrideNavigation,f=Re(t,l,e.basename);if(!f){let T=V(404,{pathname:l.pathname}),{matches:N,route:$}=Xe(t);Ee(),ie(l,{matches:N,loaderData:{},errors:{[$.id]:T}});return}if(pr(i.location,l)&&!(c&&c.submission&&H(c.submission.formMethod))){ie(l,{matches:f});return}L=new AbortController;let b=ce(e.history,l,L.signal,c&&c.submission),v,R;if(c&&c.pendingError)R={[ne(f).route.id]:c.pendingError};else if(c&&c.submission&&H(c.submission.formMethod)){let T=await vt(b,l,c.submission,f,{replace:c.replace});if(T.shortCircuited)return;v=T.pendingActionData,R=T.pendingActionError,p=E({state:"loading",location:l},c.submission),b=new Request(b.url,{signal:b.signal})}let{shortCircuited:y,loaderData:I,errors:S}=await bt(b,l,f,p,c&&c.submission,c&&c.replace,v,R);y||(L=null,ie(l,E({matches:f},v?{actionData:v}:{},{loaderData:I,errors:S})))}async function vt(o,l,c,p,f){Me();let b=E({state:"submitting",location:l},c);j({navigation:b});let v,R=et(p,l);if(!R.route.action)v={type:O.error,error:V(405,{method:o.method,pathname:l.pathname,routeId:R.route.id})};else if(v=await de("action",o,R,p,D.basename),o.signal.aborted)return{shortCircuited:!0};if(ae(v)){let y;return f&&f.replace!=null?y=f.replace:y=v.location===i.location.pathname+i.location.search,await oe(i,v,{submission:c,replace:y}),{shortCircuited:!0}}if(fe(v)){let y=ne(p,R.route.id);return(f&&f.replace)!==!0&&(M=_.Push),{pendingActionData:{},pendingActionError:{[y.route.id]:v.error}}}if(J(v))throw V(400,{type:"defer-action"});return{pendingActionData:{[R.route.id]:v.data}}}async function bt(o,l,c,p,f,b,v,R){let y=p;y||(y=E({state:"loading",location:l,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},f));let I=f||(y.formMethod&&y.formAction&&y.formData&&y.formEncType?{formMethod:y.formMethod,formAction:y.formAction,formData:y.formData,formEncType:y.formEncType}:void 0),[S,T]=Ve(e.history,i,c,I,l,C,F,U,v,R,te);if(Ee(k=>!(c&&c.some(B=>B.route.id===k))||S&&S.some(B=>B.route.id===k)),S.length===0&&T.length===0)return ie(l,E({matches:c,loaderData:{},errors:R||null},v?{actionData:v}:{})),{shortCircuited:!0};if(!w){T.forEach(B=>{let X=i.fetchers.get(B.key),we={state:"loading",data:X&&X.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};i.fetchers.set(B.key,we)});let k=v||i.actionData;j(E({navigation:y},k?Object.keys(k).length===0?{actionData:null}:{actionData:k}:{},T.length>0?{fetchers:new Map(i.fetchers)}:{}))}ee=++K,T.forEach(k=>P.set(k.key,L));let{results:N,loaderResults:$,fetcherResults:se}=await _e(i.matches,c,S,T,o);if(o.signal.aborted)return{shortCircuited:!0};T.forEach(k=>P.delete(k.key));let ve=Je(N);if(ve)return await oe(i,ve,{replace:b}),{shortCircuited:!0};let{loaderData:be,errors:re}=qe(i,c,S,$,R,T,se,q);q.forEach((k,B)=>{k.subscribe(X=>{(X||k.done)&&q.delete(B)})}),Mt();let Ae=je(ee);return E({loaderData:be,errors:re},Ae||T.length>0?{fetchers:new Map(i.fetchers)}:{})}function Te(o){return i.fetchers.get(o)||dr}function wt(o,l,c,p){if(cr)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");P.has(o)&&ge(o);let f=Re(t,c,e.basename);if(!f){Pe(o,l,V(404,{pathname:c}));return}let{path:b,submission:v}=ze(c,p,!0),R=et(f,b);if(A=(p&&p.preventScrollReset)===!0,v&&H(v.formMethod)){Rt(o,l,b,R,f,v);return}te.set(o,{routeId:l,path:b,match:R,matches:f}),Dt(o,l,b,R,f,v)}async function Rt(o,l,c,p,f,b){if(Me(),te.delete(o),!p.route.action){let W=V(405,{method:b.formMethod,pathname:c,routeId:l});Pe(o,l,W);return}let v=i.fetchers.get(o),R=E({state:"submitting"},b,{data:v&&v.data," _hasFetcherDoneAnything ":!0});i.fetchers.set(o,R),j({fetchers:new Map(i.fetchers)});let y=new AbortController,I=ce(e.history,c,y.signal,b);P.set(o,y);let S=await de("action",I,p,f,D.basename);if(I.signal.aborted){P.get(o)===y&&P.delete(o);return}if(ae(S)){P.delete(o),pe.add(o);let W=E({state:"loading"},b,{data:void 0," _hasFetcherDoneAnything ":!0});return i.fetchers.set(o,W),j({fetchers:new Map(i.fetchers)}),oe(i,S,{isFetchActionRedirect:!0})}if(fe(S)){Pe(o,l,S.error);return}if(J(S))throw V(400,{type:"defer-action"});let T=i.navigation.location||i.location,N=ce(e.history,T,y.signal),$=i.navigation.state!=="idle"?Re(t,i.navigation.location,e.basename):i.matches;x($,"Didn't find any matches after fetcher action");let se=++K;Y.set(o,se);let ve=E({state:"loading",data:S.data},b,{" _hasFetcherDoneAnything ":!0});i.fetchers.set(o,ve);let[be,re]=Ve(e.history,i,$,b,T,C,F,U,{[p.route.id]:S.data},void 0,te);re.filter(W=>W.key!==o).forEach(W=>{let Le=W.key,Ne=i.fetchers.get(Le),Lt={state:"loading",data:Ne&&Ne.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};i.fetchers.set(Le,Lt),P.set(Le,y)}),j({fetchers:new Map(i.fetchers)});let{results:Ae,loaderResults:k,fetcherResults:B}=await _e(i.matches,$,be,re,N);if(y.signal.aborted)return;Y.delete(o),P.delete(o),re.forEach(W=>P.delete(W.key));let X=Je(Ae);if(X)return oe(i,X);let{loaderData:we,errors:xe}=qe(i,i.matches,be,k,void 0,re,B,q),At={state:"idle",data:S.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};i.fetchers.set(o,At);let xt=je(se);i.navigation.state==="loading"&&se>ee?(x(M,"Expected pending action"),L&&L.abort(),ie(i.navigation.location,{matches:$,loaderData:we,errors:xe,fetchers:new Map(i.fetchers)})):(j(E({errors:xe,loaderData:Ge(i.loaderData,we,$,xe)},xt?{fetchers:new Map(i.fetchers)}:{})),C=!1)}async function Dt(o,l,c,p,f,b){let v=i.fetchers.get(o),R=E({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},b,{data:v&&v.data," _hasFetcherDoneAnything ":!0});i.fetchers.set(o,R),j({fetchers:new Map(i.fetchers)});let y=new AbortController,I=ce(e.history,c,y.signal);P.set(o,y);let S=await de("loader",I,p,f,D.basename);if(J(S)&&(S=await ft(S,I.signal,!0)||S),P.get(o)===y&&P.delete(o),I.signal.aborted)return;if(ae(S)){await oe(i,S);return}if(fe(S)){let N=ne(i.matches,l);i.fetchers.delete(o),j({fetchers:new Map(i.fetchers),errors:{[N.route.id]:S.error}});return}x(!J(S),"Unhandled fetcher deferred data");let T={state:"idle",data:S.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};i.fetchers.set(o,T),j({fetchers:new Map(i.fetchers)})}async function oe(o,l,c){var p;let{submission:f,replace:b,isFetchActionRedirect:v}=c===void 0?{}:c;l.revalidate&&(C=!0);let R=he(o.location,l.location,E({_isRedirect:!0},v?{_isFetchActionRedirect:!0}:{}));if(x(R,"Expected a location on the redirect navigation"),lt.test(l.location)&&st&&typeof((p=window)==null?void 0:p.location)<"u"){let $=e.history.createURL(l.location).origin;if(window.location.origin!==$){b?window.location.replace(l.location):window.location.assign(l.location);return}}L=null;let y=b===!0?_.Replace:_.Push,{formMethod:I,formAction:S,formEncType:T,formData:N}=o.navigation;!f&&I&&S&&N&&T&&(f={formMethod:I,formAction:S,formEncType:T,formData:N}),sr.has(l.status)&&f&&H(f.formMethod)?await G(y,R,{submission:E({},f,{formAction:l.location}),preventScrollReset:A}):await G(y,R,{overrideNavigation:{state:"loading",location:R,formMethod:f?f.formMethod:void 0,formAction:f?f.formAction:void 0,formEncType:f?f.formEncType:void 0,formData:f?f.formData:void 0},preventScrollReset:A})}async function _e(o,l,c,p,f){let b=await Promise.all([...c.map(y=>de("loader",f,y,l,D.basename)),...p.map(y=>de("loader",ce(e.history,y.path,f.signal),y.match,y.matches,D.basename))]),v=b.slice(0,c.length),R=b.slice(c.length);return await Promise.all([Qe(o,c,v,f.signal,!1,i.loaderData),Qe(o,p.map(y=>y.match),R,f.signal,!0)]),{results:b,loaderResults:v,fetcherResults:R}}function Me(){C=!0,F.push(...Ee()),te.forEach((o,l)=>{P.has(l)&&(U.push(l),ge(l))})}function Pe(o,l,c){let p=ne(i.matches,l);Se(o),j({errors:{[p.route.id]:c},fetchers:new Map(i.fetchers)})}function Se(o){P.has(o)&&ge(o),te.delete(o),Y.delete(o),pe.delete(o),i.fetchers.delete(o)}function ge(o){let l=P.get(o);x(l,"Expected fetch controller: "+o),l.abort(),P.delete(o)}function Oe(o){for(let l of o){let p={state:"idle",data:Te(l).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};i.fetchers.set(l,p)}}function Mt(){let o=[];for(let l of pe){let c=i.fetchers.get(l);x(c,"Expected fetcher: "+l),c.state==="loading"&&(pe.delete(l),o.push(l))}Oe(o)}function je(o){let l=[];for(let[c,p]of Y)if(p<o){let f=i.fetchers.get(c);x(f,"Expected fetcher: "+c),f.state==="loading"&&(ge(c),Y.delete(c),l.push(c))}return Oe(l),l.length>0}function Pt(o,l){let c=i.blockers.get(o)||He;return z.get(o)!==l&&z.set(o,l),c}function le(o){i.blockers.delete(o),z.delete(o)}function ye(o,l){let c=i.blockers.get(o)||He;x(c.state==="unblocked"&&l.state==="blocked"||c.state==="blocked"&&l.state==="blocked"||c.state==="blocked"&&l.state==="proceeding"||c.state==="blocked"&&l.state==="unblocked"||c.state==="proceeding"&&l.state==="unblocked","Invalid blocker state transition: "+c.state+" -> "+l.state),i.blockers.set(o,l),j({blockers:new Map(i.blockers)})}function ke(o){let{currentLocation:l,nextLocation:c,historyAction:p}=o;if(z.size===0)return;z.size>1&&me(!1,"A router only supports one blocker at a time");let f=Array.from(z.entries()),[b,v]=f[f.length-1],R=i.blockers.get(b);if(!(R&&R.state==="proceeding")&&v({currentLocation:l,nextLocation:c,historyAction:p}))return b}function Ee(o){let l=[];return q.forEach((c,p)=>{(!o||o(p))&&(c.cancel(),l.push(p),q.delete(p))}),l}function St(o,l,c){if(a=o,s=l,d=c||(p=>p.key),!u&&i.navigation===Fe){u=!0;let p=Ie(i.location,i.matches);p!=null&&j({restoreScrollPosition:p})}return()=>{a=null,s=null,d=null}}function Et(o,l){if(a&&d&&s){let c=l.map(f=>Ze(f,i.loaderData)),p=d(o,c)||o.key;a[p]=s()}}function Ie(o,l){if(a&&d&&s){let c=l.map(b=>Ze(b,i.loaderData)),p=d(o,c)||o.key,f=a[p];if(typeof f=="number")return f}return null}return D={get basename(){return e.basename},get state(){return i},get routes(){return t},initialize:mt,subscribe:gt,enableScrollRestoration:St,navigate:Ue,fetch:wt,revalidate:yt,createHref:o=>e.history.createHref(o),encodeLocation:o=>e.history.encodeLocation(o),getFetcher:Te,deleteFetcher:Se,dispose:pt,getBlocker:Pt,deleteBlocker:le,_internalFetchControllers:P,_internalActiveDeferreds:q},D}function ur(e){return e!=null&&"formData"in e}function ze(e,t,r){r===void 0&&(r=!1);let n=typeof e=="string"?e:Q(e);if(!t||!ur(t))return{path:n};if(t.formMethod&&!yr(t.formMethod))return{path:n,error:V(405,{method:t.formMethod})};let a;if(t.formData&&(a={formMethod:t.formMethod||"get",formAction:ut(n),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData},H(a.formMethod)))return{path:n,submission:a};let d=Z(n),s=ct(t.formData);return r&&d.search&&ht(d.search)&&s.append("index",""),d.search="?"+s,{path:Q(d),submission:a}}function fr(e,t){let r=e;if(t){let n=e.findIndex(a=>a.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function Ve(e,t,r,n,a,d,s,u,m,h,g){let D=h?Object.values(h)[0]:m?Object.values(m)[0]:void 0,i=e.createURL(t.location),M=e.createURL(a),A=d||i.toString()===M.toString()||i.search!==M.search,L=h?Object.keys(h)[0]:void 0,C=fr(r,L).filter((U,P)=>{if(U.route.loader==null)return!1;if(hr(t.loaderData,t.matches[P],U)||s.some(Y=>Y===U.route.id))return!0;let K=t.matches[P],ee=U;return Ye(U,E({currentUrl:i,currentParams:K.params,nextUrl:M,nextParams:ee.params},n,{actionResult:D,defaultShouldRevalidate:A||dt(K,ee)}))}),F=[];return g&&g.forEach((U,P)=>{if(r.some(K=>K.route.id===U.routeId))u.includes(P)?F.push(E({key:P},U)):Ye(U.match,E({currentUrl:i,currentParams:t.matches[t.matches.length-1].params,nextUrl:M,nextParams:r[r.length-1].params},n,{actionResult:D,defaultShouldRevalidate:A}))&&F.push(E({key:P},U));else return}),[C,F]}function hr(e,t,r){let n=!t||r.route.id!==t.route.id,a=e[r.route.id]===void 0;return n||a}function dt(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function Ye(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function de(e,t,r,n,a,d,s,u){a===void 0&&(a="/"),d===void 0&&(d=!1),s===void 0&&(s=!1);let m,h,g,D=new Promise((M,A)=>g=A),i=()=>g();t.signal.addEventListener("abort",i);try{let M=r.route[e];x(M,"Could not find the "+e+' to run on the "'+r.route.id+'" route'),h=await Promise.race([M({request:t,params:r.params,context:u}),D]),x(h!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(M){m=O.error,h=M}finally{t.signal.removeEventListener("abort",i)}if(gr(h)){let M=h.status;if(lr.has(M)){let w=h.headers.get("Location");if(x(w,"Redirects returned/thrown from loaders/actions must have a Location header"),lt.test(w)){if(!d){let C=new URL(t.url),F=w.startsWith("//")?new URL(C.protocol+w):new URL(w);F.origin===C.origin&&(w=F.pathname+F.search+F.hash)}}else{let C=n.slice(0,n.indexOf(r)+1),F=at(C).map(P=>P.pathnameBase),U=Xt(w,F,new URL(t.url).pathname);if(x(Q(U),"Unable to resolve redirect location: "+w),a){let P=U.pathname;U.pathname=P==="/"?a:ue([a,P])}w=Q(U)}if(d)throw h.headers.set("Location",w),h;return{type:O.redirect,status:M,location:w,revalidate:h.headers.get("X-Remix-Revalidate")!==null}}if(s)throw{type:m||O.data,response:h};let A,L=h.headers.get("Content-Type");return L&&/\bapplication\/json\b/.test(L)?A=await h.json():A=await h.text(),m===O.error?{type:m,error:new it(M,h.statusText,A),headers:h.headers}:{type:O.data,data:A,statusCode:h.status,headers:h.headers}}return m===O.error?{type:m,error:h}:h instanceof er?{type:O.deferred,deferredData:h}:{type:O.data,data:h}}function ce(e,t,r,n){let a=e.createURL(ut(t)).toString(),d={signal:r};if(n&&H(n.formMethod)){let{formMethod:s,formEncType:u,formData:m}=n;d.method=s.toUpperCase(),d.body=u==="application/x-www-form-urlencoded"?ct(m):m}return new Request(a,d)}function ct(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,n instanceof File?n.name:n);return t}function mr(e,t,r,n,a){let d={},s=null,u,m=!1,h={};return r.forEach((g,D)=>{let i=t[D].route.id;if(x(!ae(g),"Cannot handle redirect results in processLoaderData"),fe(g)){let M=ne(e,i),A=g.error;n&&(A=Object.values(n)[0],n=void 0),s=s||{},s[M.route.id]==null&&(s[M.route.id]=A),d[i]=void 0,m||(m=!0,u=nr(g.error)?g.error.status:500),g.headers&&(h[i]=g.headers)}else J(g)?(a.set(i,g.deferredData),d[i]=g.deferredData.data):d[i]=g.data,g.statusCode!=null&&g.statusCode!==200&&!m&&(u=g.statusCode),g.headers&&(h[i]=g.headers)}),n&&(s=n,d[Object.keys(n)[0]]=void 0),{loaderData:d,errors:s,statusCode:u||200,loaderHeaders:h}}function qe(e,t,r,n,a,d,s,u){let{loaderData:m,errors:h}=mr(t,r,n,a,u);for(let g=0;g<d.length;g++){let{key:D,match:i}=d[g];x(s!==void 0&&s[g]!==void 0,"Did not find corresponding fetcher result");let M=s[g];if(fe(M)){let A=ne(e.matches,i.route.id);h&&h[A.route.id]||(h=E({},h,{[A.route.id]:M.error})),e.fetchers.delete(D)}else if(ae(M))x(!1,"Unhandled fetcher revalidation redirect");else if(J(M))x(!1,"Unhandled fetcher deferred data");else{let A={state:"idle",data:M.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(D,A)}}return{loaderData:m,errors:h}}function Ge(e,t,r,n){let a=E({},t);for(let d of r){let s=d.route.id;if(t.hasOwnProperty(s)?t[s]!==void 0&&(a[s]=t[s]):e[s]!==void 0&&(a[s]=e[s]),n&&n.hasOwnProperty(s))break}return a}function ne(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function Xe(e){let t=e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function V(e,t){let{pathname:r,routeId:n,method:a,type:d}=t===void 0?{}:t,s="Unknown Server Error",u="Unknown @remix-run/router error";return e===400?(s="Bad Request",a&&r&&n?u="You made a "+a+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":d==="defer-action"&&(u="defer() is not supported in actions")):e===403?(s="Forbidden",u='Route "'+n+'" does not match URL "'+r+'"'):e===404?(s="Not Found",u='No route matches URL "'+r+'"'):e===405&&(s="Method Not Allowed",a&&r&&n?u="You made a "+a.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":a&&(u='Invalid request method "'+a.toUpperCase()+'"')),new it(e||500,s,new Error(u),!0)}function Je(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(ae(r))return r}}function ut(e){let t=typeof e=="string"?Z(e):e;return Q(E({},t,{hash:""}))}function pr(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function J(e){return e.type===O.deferred}function fe(e){return e.type===O.error}function ae(e){return(e&&e.type)===O.redirect}function gr(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function yr(e){return or.has(e)}function H(e){return ar.has(e)}async function Qe(e,t,r,n,a,d){for(let s=0;s<r.length;s++){let u=r[s],m=t[s],h=e.find(D=>D.route.id===m.route.id),g=h!=null&&!dt(h,m)&&(d&&d[m.route.id])!==void 0;J(u)&&(a||g)&&await ft(u,n,a).then(D=>{D&&(r[s]=D||r[s])})}}async function ft(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:O.data,data:e.deferredData.unwrappedData}}catch(a){return{type:O.error,error:a}}return{type:O.data,data:e.deferredData.data}}}function ht(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Ze(e,t){let{route:r,pathname:n,params:a}=e;return{id:r.id,pathname:n,params:a,data:t[r.id],handle:r.handle}}function et(e,t){let r=typeof t=="string"?Z(t).search:t.search;if(e[e.length-1].route.index&&ht(r||""))return e[e.length-1];let n=at(e);return n[n.length-1]}export{_ as A,it as E,nr as a,vr as b,br as c,Q as d,at as g,x as i,ue as j,Re as m,Z as p,Xt as r,Yt as s};
